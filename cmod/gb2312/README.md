# gb2312 编码

1. Unicode 设计中，每一个字符都会有一个整数相对应，这个整数被称为 codepoint
2. 文本文件中实际记录的字节序列是由 codepoint 经过字节编码转换而成
3. GB2312 就是这样的一种字节编码，UTF-8 也是这样一种字节编码

## “烫”的由来

1. x86 系列 CPU 支持软中断 INT 3 用于调试，其机器码为一个字节的 0xCC（故意设计成一个字节，方便调试器使用）
2. VisualStudio 的调试模式下（使用`/GZ`编译参数），新分配的未初始化内存空间会被默认初始化为 0xCC（目的是程序异常跳转到此处就会触发调试中断）（类似的还有`0xCD`等特殊内存值）
3. Windows 默认使用 GB2312 编码（通过 cmd 中的 chcp 命令可得到活动代码页为 936， 对应的就是 GB2312；活动代码页 65001 对应的是 UTF-8）
4. GB2312 编码中，烫的机器码为 0xCCCC
5. 当使用 printf 之类的函数打印未初始化内存的内容时，就会得到“烫”字

## “锟斤拷”的由来

1. 文件本身使用非 UTF-8 编码（如：GB2312）
2. Unicode 中，无法显示的字符，用占位符`�`代替，该占位符的 codepoint 为：0xFFFD，对应的 UTF-8 编码字节序列为：239、191、189
3. 在转码成 UTF-8 的时候无法理解的字节序列就会被 0xFFFD 的字节序列代替（比如转成带 BOM 的 UTF-8 编码）
4. GB2312 编码中，锟的字节序列是 239、191，斤的字节序列是 189、239，拷的字节序列是 191、189

因此，“锟斤拷”出现的流程是：

1. 以 GB2312 编码写完中文字符并保存为字节序列
2. 强行以 UTF-8 编码来解读字节序列和转码，并保存新的字节序列
3. 再用 GB2312 编码来解读，此时就会出现锟斤拷

注意，通过这套操作，原先 GB2312 编码记录的信息会丢失，变成了“锟斤拷”无用信息
