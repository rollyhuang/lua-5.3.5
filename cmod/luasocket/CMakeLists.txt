# cmake_minimum_required(VERSION 3.0)
# project(luasocket)
if(APPLE)
    add_compile_options(-std=gnu99 -g -Wall -DLUA_COMPAT_MODULE -Wextra)
endif(APPLE)
if(CMAKE_SYSTEM_NAME MATCHES "Linux")
    add_compile_options(-std=gnu99 -g -Wall -DLUA_COMPAT_MODULE -Wextra)
endif(CMAKE_SYSTEM_NAME MATCHES "Linux")
if(WIN32)
    add_compile_options(-Wall -DLUA_COMPAT_MODULE)
endif(WIN32)
include_directories(../../include)
# aux_source_directory(. LUASOCKETMOD_SRC)
set(LUASOCKETMOD_SRC auxiliar.c except.c luasocket.c select.c timeout.c unixdgram.c buffer.c inet.c mime.c serial.c udp.c unixstream.c compat.c io.c options.c tcp.c unix.c)
if(WIN32)
    set(LUASOCKETMOD_SRC ${LUASOCKETMOD_SRC} wsocket.c)
else(WIN32)
    set(LUASOCKETMOD_SRC ${LUASOCKETMOD_SRC} usocket.c)
endif(WIN32)

add_library(luasocketmod MODULE ${LUASOCKETMOD_SRC})#dynamic load library  .so .bundle
target_link_libraries(luasocketmod lualib)
